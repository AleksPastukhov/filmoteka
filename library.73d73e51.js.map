{"mappings":"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","sources":["src/js/loader.js","src/js/local-storage-info.js","src/js/library.js","src/js/modal.js"],"sourcesContent":["// FT-21 Підключити/зверстати Loader (spinner) для асинхронних запитів\n// preloader\ndocument.body.onload = function () {\n  setTimeout(() => {\n    const preloader = document.querySelector('.preloader');\n    if (preloader !== null && !preloader.classList.contains('done')) {\n      preloader.classList.add('done');\n    }\n  }, 1000);\n};\n\n// spinner\nexport class Spinner {\n  constructor(selector) {\n    this.spinner = document.querySelector(selector);\n  }\n  addSpinner() {\n    this.spinner.classList.remove('hidden');\n  }\n  removeSpinner() {\n    this.spinner.classList.add('hidden');\n  }\n}\n\n// Щоб підключити спінер у своєму файлі:\n// 1) import Spinner from \"./loader\";\n// 2) const spinner = new Spinner('.spinner');\n// 3) spinner.addSpinner(); - додати спінер\n// 4) spinner.removeSpinner(); - зняти спінер\n","const saveDataToLocalStorage = (key, value) => {\n  try {\n    const result = JSON.stringify(value);\n    localStorage.setItem(key, result);\n  } catch (error) {\n    console.log('Error: ', error.message);\n  }\n};\n\nconst getDataFromLocalStorage = key => {\n  try {\n    const data = localStorage.getItem(key);\n    const result = null ? undefined : JSON.parse(data);\n    return result;\n  } catch (error) {\n    console.log('Error: ', error.message);\n  }\n};\n\nconst removeDataFromLocalStorage = key => {\n  localStorage.removeItem(key);\n};\n\nexport {\n  saveDataToLocalStorage,\n  getDataFromLocalStorage,\n  removeDataFromLocalStorage,\n};\n","// FT-14 За натисканням на кнопку \"Watched\" показуються переглянуті фільми користувача\n// FT-15 За натисканням на кнопку \"Queue\" показуються фільми додані в чергу користувача\n// FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (localStorage)\n// FT-19 За натисканням на кнопку \"Add to queue\" фільм додається до черги поточного користувача (localStorage)\n\nimport { Spinner } from './loader.js';\nimport {\n  saveDataToLocalStorage,\n  getDataFromLocalStorage,\n  removeDataFromLocalStorage,\n} from './local-storage-info';\n\nconst refs = {\n  watchedBtn: document.querySelector('button.watched'),\n  queueBtn: document.querySelector('button.queue'),\n  libraryContainer: document.querySelector('.library__container'),\n  libraryList: document.querySelector('.library__list'),\n  emptyLibrary: document.querySelector('.empty-library'),\n  libraryName: document.querySelector('span.library-name'),\n};\nconst spinner = new Spinner('.spinner');\nlet currentMovieData = {};\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick() {\n  spinner.addSpinner();\n  changeActiveBtn(refs.watchedBtn, refs.queueBtn);\n  renderSavedMovies('watched');\n  refs.libraryName.textContent = 'watched';\n  setTimeout(() => {\n    spinner.removeSpinner();\n  }, 800);\n  // initModal();\n}\nfunction onQueueBtnClick() {\n  spinner.addSpinner();\n  changeActiveBtn(refs.queueBtn, refs.watchedBtn);\n  renderSavedMovies('queue');\n  refs.libraryName.textContent = 'queue';\n  setTimeout(() => {\n    spinner.removeSpinner();\n  }, 800);\n  // initModal();\n}\nfunction changeActiveBtn(btn1, btn2) {\n  btn1.classList.add('is-active');\n  btn2.classList.remove('is-active');\n}\nfunction renderSavedMovies(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  spinner.addSpinner();\n  if (savedMovies) {\n    emptyLibrary.classList.add('visually-hidden');\n    // renderMarkup(savedMovies);\n  }\n  spinner.removeSpinner();\n}\nfunction saveMovie(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  savedMovies.unshift(currentMovieData);\n  saveDataToLocalStorage(library, savedMovies);\n}\nfunction isMovieInStorage(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  if (!savedMovies) {\n    saveDataToLocalStorage(library, '[]');\n    return false;\n  }\n  return savedMovies.some(e => e.id === currentMovieData.id);\n}\nfunction deleteMovie(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  const indexOfMovieToDelete = savedMovies.findIndex(\n    e => e.id === currentMovieData.id\n  );\n  savedMovies.splice(indexOfMovieToDelete, 1);\n  saveDataToLocalStorage(library, savedMovies);\n  // renderMarkup(savedMovies);\n}\nfunction changeBtnName(library) {\n  const actionName = isMovieInStorage(library) ? 'delete from ' : 'add to ';\n  switch (library) {\n    case 'watched':\n      refs.btn1.textContent = (actionName + library).toUpperCase();\n      return;\n    case 'queue':\n      refs.btn2.textContent = (actionName + library).toUpperCase();\n      return;\n  }\n}\n\nonWatchedBtnClick();\n","// FT-17 Після натискання на картку фільму на будь-якій сторінці повинна відкриватися модалка з динамічно підставленою інформацією про фільм\n\n// const refs = {\n//   openModalBtn: document.querySelector('.cards__list'),\n//   closeModalBtn: document.querySelector('.modal-close'),\n//   modal: document.querySelector('.backdrop'),\n// };\n// refs.openModalBtn.addEventListener('click', toggleModal);\n// refs.closeModalBtn.addEventListener('click', toggleModal);\n\n// function toggleModal(evt) {\n//   console.log(evt.target.classList);\n//   if (evt.target.classList.contains('library__image')) {\n//     console.log('Відкриття модалки');\n//     console.log(refs.modal.classList);\n//     refs.modal.classList.remove('visually-hidden');\n//   }\n//   if (evt.target.classList.contains('svg-close')) {\n//     console.log('Закриття модалки');\n//     refs.modal.classList.add('visually-hidden');\n//     console.log(refs.modal.classList);\n//   }\n//   if (evt.currentTarget.classList.contains('modal-close')) {\n//     console.log('Закриття модалки');\n//     refs.modal.classList.add('visually-hidden');\n//     console.log(refs.modal.classList);\n//   }\n// }\nconst refs = {\n  filmGalaryContainer: document.querySelector('.home'),\n  closeModalBtn: document.querySelector('.modal-close'),\n  modal: document.querySelector('.backdrop'),\n};\n\nrefs.filmGalaryContainer.addEventListener('click', onFilmCardClick);\nrefs.closeModalBtn.addEventListener('click', onCloseBtnClick);\n\nfunction onFilmCardClick(evt) {\n  evt.preventDefault();\n  console.log(evt.target.classList);\n\n  if (\n    !evt.target.classList.contains('library__item') &&\n    !evt.target.classList.contains('library__link') &&\n    !evt.target.classList.contains('library__thumb') &&\n    !evt.target.classList.contains('library__image') &&\n    !evt.target.classList.contains('library__paragraph') &&\n    !evt.target.classList.contains('library__movie') &&\n    !evt.target.classList.contains('library__info') &&\n    !evt.target.classList.contains('library__description') &&\n    !evt.target.classList.contains('library__genres') &&\n    !evt.target.classList.contains('library__year') &&\n    !evt.target.classList.contains('library__rating')\n  ) {\n    return;\n  }\n\n  refs.modal.classList.remove('visually-hidden');\n  onMovieCardClick();\n  document.body.style.overflow = 'hidden';\n}\n\nfunction onCloseBtnClick() {\n  refs.modal.classList.add('visually-hidden');\n  document.body.style.overflow = 'auto';\n}\nconst filmGalaryContainer = document.querySelector('.home');\n\nfilmGalaryContainer.addEventListener('click', onMovieCardClick);\n\nfunction onMovieCardClick(evt) {\n  // evt.preventDefault();\n  // console.log(evt.target.classList);\n\n  // if (\n  //   !evt.target.classList.contains('cards__text') &&\n  //   !evt.target.classList.contains('cards__thumb') &&\n  //   !evt.target.classList.contains('cards__link') &&\n  //   !evt.target.classList.contains('cards__item')\n  // ) {\n  //   console.log('клік не на картку');\n  //   return;\n  // }\n\n  window.addEventListener('keydown', onKeyEscpPress);\n\n  function onKeyEscpPress(evt) {\n    if (evt.code !== 'Escape') {\n      return;\n    }\n\n    onCloseBtnClick();\n    window.removeEventListener('keydown', onKeyEscpPress);\n  }\n  refs.modal.addEventListener('click', onBackdropClick);\n  function onBackdropClick(evt) {\n    if (evt.currentTarget === evt.target) {\n      onCloseBtnClick();\n    }\n  }\n}\n// fetch(\n//   'https://api.themoviedb.org/3/trending/movie/day?api_key=008ad61af513926e956f6d36edd6996c'\n// )\n//   .then(response => response.json())\n//   .then(data => console.log(data));\n\n// async function getData() {\n//   const response = await fetch(\n//     'https://api.themoviedb.org/3/trending/movie/day?api_key=008ad61af513926e956f6d36edd6996c'\n//   );\n//   return response;\n// }\n// getData()\n//   .then(response => response.json())\n//   .then(data => console.log(data));\n"],"names":["document","body","onload","setTimeout","preloader","querySelector","classList","contains","add","$da83b72ff955cc29$export$408171784a564cae","key","data","localStorage","getItem","JSON","parse","error","console","log","message","$1cafa503bc57b7a0$var$refs","watchedBtn","queueBtn","libraryContainer","libraryList","emptyLibrary","libraryName","$1cafa503bc57b7a0$var$spinner","addSpinner","this","spinner","remove","removeSpinner","constructor","selector","$1cafa503bc57b7a0$var$onWatchedBtnClick","$1cafa503bc57b7a0$var$changeActiveBtn","$1cafa503bc57b7a0$var$renderSavedMovies","textContent","btn1","btn2","library","savedMovies","addEventListener","$8a7e756c566dd1ea$var$refs","filmGalaryContainer","closeModalBtn","modal","$8a7e756c566dd1ea$var$onCloseBtnClick","style","overflow","evt","preventDefault","target","$8a7e756c566dd1ea$var$onMovieCardClick","window","onKeyEscpPress","code","removeEventListener","currentTarget"],"version":3,"file":"library.73d73e51.js.map"}