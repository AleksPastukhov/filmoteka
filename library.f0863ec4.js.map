{"mappings":"gfAKA,IAAAA,EAAAC,EAAA,S,aAOA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,kBACnCC,SAAUF,SAASC,cAAc,gBACjCE,iBAAkBH,SAASC,cAAc,uBACzCG,YAAaJ,SAASC,cAAc,kBACpCI,aAAcL,SAASC,cAAc,kBACrCK,YAAaN,SAASC,cAAc,sBAEhCM,EAAU,IAAI,EAAAX,EAAAY,SAAQ,YAM5B,SAASC,IACPF,EAAQG,aACRC,EAAgBb,EAAKC,WAAYD,EAAKI,UACtCU,EAAkB,WAClBd,EAAKQ,YAAYO,YAAc,UAC/BC,YAAW,KACTP,EAAQQ,eAAa,GACpB,IAEL,CAWA,SAASJ,EAAgBK,EAAMC,GAC7BD,EAAKE,UAAUC,IAAI,aACnBF,EAAKC,UAAUE,OAAO,YACxB,CACA,SAASR,EAAkBS,GACzB,MAAMC,GAAc,EAAAC,EAAAC,yBAAwBH,GAC5Cd,EAAQG,aACJY,GACFjB,aAAaa,UAAUC,IAAI,mBAG7BZ,EAAQQ,eACV,CAnCAjB,EAAKC,WAAW0B,iBAAiB,QAAShB,GAC1CX,EAAKI,SAASuB,iBAAiB,SAY/B,WACElB,EAAQG,aACRC,EAAgBb,EAAKI,SAAUJ,EAAKC,YACpCa,EAAkB,SAClBd,EAAKQ,YAAYO,YAAc,QAC/BC,YAAW,KACTP,EAAQQ,eAAa,GACpB,IAEL,IAgDAN,G","sources":["src/js/library.js"],"sourcesContent":["// FT-14 За натисканням на кнопку \"Watched\" показуються переглянуті фільми користувача\n// FT-15 За натисканням на кнопку \"Queue\" показуються фільми додані в чергу користувача\n// FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (localStorage)\n// FT-19 За натисканням на кнопку \"Add to queue\" фільм додається до черги поточного користувача (localStorage)\n\nimport { Spinner } from './loader.js';\nimport {\n  saveDataToLocalStorage,\n  getDataFromLocalStorage,\n  removeDataFromLocalStorage,\n} from './local-storage-info';\n\nconst refs = {\n  watchedBtn: document.querySelector('button.watched'),\n  queueBtn: document.querySelector('button.queue'),\n  libraryContainer: document.querySelector('.library__container'),\n  libraryList: document.querySelector('.library__list'),\n  emptyLibrary: document.querySelector('.empty-library'),\n  libraryName: document.querySelector('span.library-name'),\n};\nconst spinner = new Spinner('.spinner');\nlet currentMovieData = {};\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick() {\n  spinner.addSpinner();\n  changeActiveBtn(refs.watchedBtn, refs.queueBtn);\n  renderSavedMovies('watched');\n  refs.libraryName.textContent = 'watched';\n  setTimeout(() => {\n    spinner.removeSpinner();\n  }, 800);\n  // initModal();\n}\nfunction onQueueBtnClick() {\n  spinner.addSpinner();\n  changeActiveBtn(refs.queueBtn, refs.watchedBtn);\n  renderSavedMovies('queue');\n  refs.libraryName.textContent = 'queue';\n  setTimeout(() => {\n    spinner.removeSpinner();\n  }, 800);\n  // initModal();\n}\nfunction changeActiveBtn(btn1, btn2) {\n  btn1.classList.add('is-active');\n  btn2.classList.remove('is-active');\n}\nfunction renderSavedMovies(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  spinner.addSpinner();\n  if (savedMovies) {\n    emptyLibrary.classList.add('visually-hidden');\n    // renderMarkup(savedMovies);\n  }\n  spinner.removeSpinner();\n}\nfunction saveMovie(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  savedMovies.unshift(currentMovieData);\n  saveDataToLocalStorage(library, savedMovies);\n}\nfunction isMovieInStorage(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  if (!savedMovies) {\n    saveDataToLocalStorage(library, '[]');\n    return false;\n  }\n  return savedMovies.some(e => e.id === currentMovieData.id);\n}\nfunction deleteMovie(library) {\n  const savedMovies = getDataFromLocalStorage(library);\n  const indexOfMovieToDelete = savedMovies.findIndex(\n    e => e.id === currentMovieData.id\n  );\n  savedMovies.splice(indexOfMovieToDelete, 1);\n  saveDataToLocalStorage(library, savedMovies);\n  // renderMarkup(savedMovies);\n}\nfunction changeBtnName(library) {\n  const actionName = isMovieInStorage(library) ? 'delete from ' : 'add to ';\n  switch (library) {\n    case 'watched':\n      refs.btn1.textContent = (actionName + library).toUpperCase();\n      return;\n    case 'queue':\n      refs.btn2.textContent = (actionName + library).toUpperCase();\n      return;\n  }\n}\n\nonWatchedBtnClick();\n"],"names":["$kvC6y","parcelRequire","$93effc6fc56091ad$var$refs","watchedBtn","document","querySelector","queueBtn","libraryContainer","libraryList","emptyLibrary","libraryName","$93effc6fc56091ad$var$spinner","Spinner","$93effc6fc56091ad$var$onWatchedBtnClick","addSpinner","$93effc6fc56091ad$var$changeActiveBtn","$93effc6fc56091ad$var$renderSavedMovies","textContent","setTimeout","removeSpinner","btn1","btn2","classList","add","remove","library","savedMovies","$x2KWZ","getDataFromLocalStorage","addEventListener"],"version":3,"file":"library.f0863ec4.js.map"}